<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started • clock</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta name="robots" content="noindex">
<script defer data-domain="clock.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">clock</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.7.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/clock.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/faq.html">Frequently Asked Questions</a></li>
    <li><a class="dropdown-item" href="../articles/motivations.html">Motivations for clock</a></li>
    <li><a class="dropdown-item" href="../articles/recipes.html">Examples and Recipes</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/03/clock-0-1-0/">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/clock/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/clock/blob/main/vignettes/clock.Rmd" class="external-link"><code>vignettes/clock.Rmd</code></a></small>
      <div class="d-none name"><code>clock.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://clock.r-lib.org">clock</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></code></pre></div>
<p>The goal of this vignette is to introduce you to clock’s high-level
API, which works directly on R’s built-in date-time types, Date and
POSIXct. For an overview of all of the functionality in the high-level
API, check out the pkgdown reference section, <a href="https://clock.r-lib.org/reference/index.html#section-high-level-api">High
Level API</a>. One thing you should immediately notice is that every
function specific to R’s date and date-time types are prefixed with
<code>date_*()</code>. There are also additional functions for
arithmetic (<code>add_*()</code>) and getting (<code>get_*()</code>) or
setting (<code>set_*()</code>) components that are also used by other
types in clock.</p>
<p>As you’ll quickly see in this vignette, one of the main goals of
clock is to guard you, the user, from unexpected issues caused by
frustrating date manipulation concepts like invalid dates and daylight
saving time. It does this by letting you know as soon as one of these
issues happens, giving you the power to handle it explicitly with one of
a number of different resolution strategies.</p>
<div class="section level2">
<h2 id="building">Building<a class="anchor" aria-label="anchor" href="#building"></a>
</h2>
<p>To create a vector of dates, you can use <code><a href="../reference/date_build.html">date_build()</a></code>.
This allows you to specify the components individually.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-02-01" "2019-02-02" "2019-02-03" "2019-02-04" "2019-02-05"</span></span></code></pre></div>
<p>If you happen to specify an <em>invalid date</em>, you’ll get an
error message:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, <span class="fl">31</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `invalid_resolve()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Invalid date found at location 2.</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">ℹ</span> Resolve invalid date issues by specifying the `invalid` argument.</span></span></code></pre></div>
<p>One way to resolve this is by specifying an invalid date resolution
strategy using the <code>invalid</code> argument. There are multiple
options, but in this case we’ll ask for the invalid dates to be set to
the previous valid moment in time.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, <span class="fl">31</span>, invalid <span class="op">=</span> <span class="st">"previous"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "2019-01-31" "2019-02-28" "2019-03-31" "2019-04-30" "2019-05-31"</span></span>
<span><span class="co">#&gt;  [6] "2019-06-30" "2019-07-31" "2019-08-31" "2019-09-30" "2019-10-31"</span></span>
<span><span class="co">#&gt; [11] "2019-11-30" "2019-12-31"</span></span></code></pre></div>
<p>To learn more about invalid dates, check out the documentation for
<code><a href="../reference/clock-invalid.html">invalid_resolve()</a></code>.</p>
<p>If we were actually after the “last day of the month”, an easier way
to specify this would have been:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, <span class="st">"last"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "2019-01-31" "2019-02-28" "2019-03-31" "2019-04-30" "2019-05-31"</span></span>
<span><span class="co">#&gt;  [6] "2019-06-30" "2019-07-31" "2019-08-31" "2019-09-30" "2019-10-31"</span></span>
<span><span class="co">#&gt; [11] "2019-11-30" "2019-12-31"</span></span></code></pre></div>
<p>You can also create date-times using <code><a href="../reference/date_time_build.html">date_time_build()</a></code>,
which generates a POSIXct. Note that you must supply a time zone!</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">30</span>, zone <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-01-01 02:30:00 EST" "2019-02-01 02:30:00 EST"</span></span>
<span><span class="co">#&gt; [3] "2019-03-01 02:30:00 EST" "2019-04-01 02:30:00 EDT"</span></span>
<span><span class="co">#&gt; [5] "2019-05-01 02:30:00 EDT"</span></span></code></pre></div>
<p>If you “build” a time that doesn’t exist, you’ll get an error. For
example, on March 8th, 2020, there was a daylight saving time gap of 1
hour in the America/New_York time zone that took us from
<code>01:59:59</code> directly to <code>03:00:00</code>, skipping the 2
o’clock hour entirely. Let’s “accidentally” create a time in that
gap:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">:</span><span class="fl">2021</span>, <span class="fl">3</span>, <span class="fl">8</span>, <span class="fl">2</span>, <span class="fl">30</span>, zone <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `as_zoned_time()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Nonexistent time due to daylight saving time at location 2.</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">ℹ</span> Resolve nonexistent time issues by specifying the `nonexistent` argument.</span></span></code></pre></div>
<p>To resolve this issue, we can specify a nonexistent time resolution
strategy through the <code>nonexistent</code> argument. There are a
number of options, including rolling forward or backward to the next or
previous valid moments in time:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">zone</span> <span class="op">&lt;-</span> <span class="st">"America/New_York"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">:</span><span class="fl">2021</span>, <span class="fl">3</span>, <span class="fl">8</span>, <span class="fl">2</span>, <span class="fl">30</span>, zone <span class="op">=</span> <span class="va">zone</span>, nonexistent <span class="op">=</span> <span class="st">"roll-forward"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-03-08 02:30:00 EST" "2020-03-08 03:00:00 EDT"</span></span>
<span><span class="co">#&gt; [3] "2021-03-08 02:30:00 EST"</span></span>
<span><span class="fu"><a href="../reference/date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">2019</span><span class="op">:</span><span class="fl">2021</span>, <span class="fl">3</span>, <span class="fl">8</span>, <span class="fl">2</span>, <span class="fl">30</span>, zone <span class="op">=</span> <span class="va">zone</span>, nonexistent <span class="op">=</span> <span class="st">"roll-backward"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-03-08 02:30:00 EST" "2020-03-08 01:59:59 EST"</span></span>
<span><span class="co">#&gt; [3] "2021-03-08 02:30:00 EST"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="parsing">Parsing<a class="anchor" aria-label="anchor" href="#parsing"></a>
</h2>
<div class="section level3">
<h3 id="parsing-dates">Parsing dates<a class="anchor" aria-label="anchor" href="#parsing-dates"></a>
</h3>
<p>To parse dates, use <code><a href="../reference/date_parse.html">date_parse()</a></code>. Parsing dates requires
a <em>format string</em>, a combination of <em>commands</em> that
specify where date components are in your string. By default, it assumes
that you’re working with dates in the form <code>"%Y-%m-%d"</code>
(year-month-day).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_parse.html">date_parse</a></span><span class="op">(</span><span class="st">"2019-01-05"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-01-05"</span></span></code></pre></div>
<p>You can change the format string using <code>format</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_parse.html">date_parse</a></span><span class="op">(</span><span class="st">"January 5, 2020"</span>, format <span class="op">=</span> <span class="st">"%B %d, %Y"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-05"</span></span></code></pre></div>
<p>Various different locales are supported for parsing month and weekday
names in different languages. To parse a French month:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_parse.html">date_parse</a></span><span class="op">(</span></span>
<span>  <span class="st">"juillet 10, 2021"</span>, </span>
<span>  format <span class="op">=</span> <span class="st">"%B %d, %Y"</span>, </span>
<span>  locale <span class="op">=</span> <span class="fu"><a href="../reference/clock_locale.html">clock_locale</a></span><span class="op">(</span><span class="st">"fr"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2021-07-10"</span></span></code></pre></div>
<p>You can learn about more locale options in the documentation for
<code><a href="../reference/clock_locale.html">clock_locale()</a></code>.</p>
<p>If you have heterogeneous dates, you can supply multiple format
strings:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020/1/5"</span>, <span class="st">"10-03-05"</span>, <span class="st">"2020/2/2"</span><span class="op">)</span></span>
<span><span class="va">formats</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"%Y/%m/%d"</span>, <span class="st">"%y-%m-%d"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date_parse.html">date_parse</a></span><span class="op">(</span><span class="va">x</span>, format <span class="op">=</span> <span class="va">formats</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-05" "2010-03-05" "2020-02-02"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="parsing-date-times">Parsing date-times<a class="anchor" aria-label="anchor" href="#parsing-date-times"></a>
</h3>
<p>You have four options when parsing date-times:</p>
<ul>
<li><p><code><a href="../reference/date-time-parse.html">date_time_parse()</a></code>: For strings like
<code>"2020-01-01 01:02:03"</code> where there is neither a time zone
offset nor a full (not abbreviated!) time zone name.</p></li>
<li><p><code><a href="../reference/date-time-parse.html">date_time_parse_complete()</a></code>: For strings like
<code>"2020-01-01T01:02:03-05:00[America/New_York]"</code> where there
is both a time zone offset and time zone name present in the
string.</p></li>
<li><p><code><a href="../reference/date-time-parse.html">date_time_parse_abbrev()</a></code>: For strings like
<code>"2020-01-01 01:02:03 EST"</code> where there is a time zone
abbreviation in the string.</p></li>
<li><p><code><a href="../reference/date-time-parse.html">date_time_parse_RFC_3339()</a></code>: For strings like
<code>"2020-01-01T01:02:03Z"</code> or
<code>"2020-01-01T01:02:03-05:00"</code>, which are in RFC 3339 format
and are intended to be interpreted as UTC.</p></li>
</ul>
<div class="section level4">
<h4 id="date_time_parse">date_time_parse()<a class="anchor" aria-label="anchor" href="#date_time_parse"></a>
</h4>
<p><code><a href="../reference/date-time-parse.html">date_time_parse()</a></code> requires a <code>zone</code> argument,
and will ignore any other zone information in the string (i.e. if you
tried to specify <code>%z</code> and <code>%Z</code>). The default
format string is <code>"%Y-%m-%d %H:%M:%S"</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse</a></span><span class="op">(</span><span class="st">"2020-01-01 01:02:03"</span>, <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-01 01:02:03 EST"</span></span></code></pre></div>
<p>If you happen to parse an invalid or ambiguous date-time, you’ll get
an error. For example, on November 1st, 2020, there were <em>two</em> 1
o’clock hours in the America/New_York time zone due to a daylight saving
time fallback. You can see that if we parse a time right before the
fallback, and then shift it forward by 1 second, and then 1 hour and 1
second, respectively:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">before</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/date-time-parse.html">date_time_parse</a></span><span class="op">(</span><span class="st">"2020-11-01 00:59:59"</span>, <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># First 1 o'clock</span></span>
<span><span class="va">before</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="co">#&gt; [1] "2020-11-01 01:00:00 EDT"</span></span>
<span></span>
<span><span class="co"># Second 1 o'clock</span></span>
<span><span class="va">before</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">3600</span></span>
<span><span class="co">#&gt; [1] "2020-11-01 01:00:00 EST"</span></span></code></pre></div>
<p>The following string doesn’t include any information about which of
these two 1 o’clocks it belongs to, so it is considered
<em>ambiguous</em>. Ambiguous times will error when parsing:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse</a></span><span class="op">(</span><span class="st">"2020-11-01 01:30:00"</span>, <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `as_zoned_time()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Ambiguous time due to daylight saving time at location 1.</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">ℹ</span> Resolve ambiguous time issues by specifying the `ambiguous` argument.</span></span></code></pre></div>
<p>To fix that, you can specify an ambiguous time resolution strategy
with the <code>ambiguous</code> argument.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">zone</span> <span class="op">&lt;-</span> <span class="st">"America/New_York"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse</a></span><span class="op">(</span><span class="st">"2020-11-01 01:30:00"</span>, <span class="va">zone</span>, ambiguous <span class="op">=</span> <span class="st">"earliest"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-11-01 01:30:00 EDT"</span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse</a></span><span class="op">(</span><span class="st">"2020-11-01 01:30:00"</span>, <span class="va">zone</span>, ambiguous <span class="op">=</span> <span class="st">"latest"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-11-01 01:30:00 EST"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="date_time_parse_complete">date_time_parse_complete()<a class="anchor" aria-label="anchor" href="#date_time_parse_complete"></a>
</h4>
<p><code><a href="../reference/date-time-parse.html">date_time_parse_complete()</a></code> doesn’t have a
<code>zone</code> argument, and doesn’t require <code>ambiguous</code>
or <code>nonexistent</code> arguments, since it assumes that the string
you are providing is completely unambiguous. The only way this is
possible is by having both a time zone offset, specified by
<code>%z</code>, and a full time zone name, specified by
<code>%Z</code>, in the string.</p>
<p>The following is an example of an “extended” RFC 3339 format used by
Java 8’s time library to specify complete date-time strings. This is
something that <code><a href="../reference/date-time-parse.html">date_time_parse_complete()</a></code> can parse. The
default format string follows this extended format, and is
<code>"%Y-%m-%dT%H:%M:%S%z[%Z]"</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"2020-01-01T01:02:03-05:00[America/New_York]"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse_complete</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-01 01:02:03 EST"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="date_time_parse_abbrev">date_time_parse_abbrev()<a class="anchor" aria-label="anchor" href="#date_time_parse_abbrev"></a>
</h4>
<p><code><a href="../reference/date-time-parse.html">date_time_parse_abbrev()</a></code> is useful when your date-time
strings contain a time zone abbreviation rather than a time zone offset
or full time zone name.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"2020-01-01 01:02:03 EST"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse_abbrev</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-01 01:02:03 EST"</span></span></code></pre></div>
<p>The string is first parsed as a naive time without considering the
abbreviation, and is then converted to a zoned-time using the supplied
<code>zone</code>. If an ambiguous time is parsed, the abbreviation is
used to resolve the ambiguity.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"1970-10-25 01:30:00 EDT"</span>,</span>
<span>  <span class="st">"1970-10-25 01:30:00 EST"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse_abbrev</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1970-10-25 01:30:00 EDT" "1970-10-25 01:30:00 EST"</span></span></code></pre></div>
<p>You might be wondering why you need to supply <code>zone</code> at
all. Isn’t the abbreviation enough? Unfortunately, multiple countries
use the same time zone abbreviations, even though they have different
time zones. This means that, in many cases, the abbreviation alone is
ambiguous. For example, both India and Israel use <code>IST</code> for
their standard times.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"1970-01-01 02:30:30 IST"</span></span>
<span></span>
<span><span class="co"># IST = India Standard Time</span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse_abbrev</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"Asia/Kolkata"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1970-01-01 02:30:30 IST"</span></span>
<span></span>
<span><span class="co"># IST = Israel Standard Time</span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse_abbrev</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"Asia/Jerusalem"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1970-01-01 02:30:30 IST"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="date_time_parse_rfc_3339">date_time_parse_RFC_3339()<a class="anchor" aria-label="anchor" href="#date_time_parse_rfc_3339"></a>
</h4>
<p><code><a href="../reference/date-time-parse.html">date_time_parse_RFC_3339()</a></code> is useful when your date-time
strings come from an API, which means they are likely in an ISO 8601 or
RFC 3339 format, and should be interpreted as UTC.</p>
<p>The default format string parses the typical RFC 3339 format of
<code>"%Y-%m-%dT%H:%M:%SZ"</code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"2020-01-01T01:02:03Z"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse_RFC_3339</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-01 01:02:03 UTC"</span></span></code></pre></div>
<p>If your date-time strings contain a numeric offset from UTC rather
than a <code>"Z"</code>, then you’ll need to set the <code>offset</code>
argument to one of the following:</p>
<ul>
<li>
<code>"%z"</code> if the offset is of the form
<code>"-0500"</code>.</li>
<li>
<code>"%Ez"</code> if the offset is of the form
<code>"-05:00"</code>.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"2020-01-01T01:02:03-0500"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse_RFC_3339</a></span><span class="op">(</span><span class="va">x</span>, offset <span class="op">=</span> <span class="st">"%z"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-01 06:02:03 UTC"</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"2020-01-01T01:02:03-05:00"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-time-parse.html">date_time_parse_RFC_3339</a></span><span class="op">(</span><span class="va">x</span>, offset <span class="op">=</span> <span class="st">"%Ez"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-01 06:02:03 UTC"</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="grouping-rounding-and-shifting">Grouping, rounding and shifting<a class="anchor" aria-label="anchor" href="#grouping-rounding-and-shifting"></a>
</h2>
<p>When performing time-series related data analysis, you often need to
summarize your series at a less precise precision. There are many
different ways to do this, and the differences between them are subtle,
but meaningful. clock offers three different sets of functions for
summarization:</p>
<ul>
<li><p><code><a href="../reference/date_group.html">date_group()</a></code></p></li>
<li><p><code><a href="../reference/date-and-date-time-rounding.html">date_floor()</a></code>, <code><a href="../reference/date-and-date-time-rounding.html">date_ceiling()</a></code>, and
<code><a href="../reference/date-and-date-time-rounding.html">date_round()</a></code></p></li>
<li><p><code><a href="../reference/date-and-date-time-shifting.html">date_shift()</a></code></p></li>
</ul>
<div class="section level3">
<h3 id="grouping">Grouping<a class="anchor" aria-label="anchor" href="#grouping"></a>
</h3>
<p>Grouping allows you to summarize a component of a date or date-time
<em>within</em> other components. An example of this is grouping by day
of the month, which summarizes the day component <em>within</em> the
current year-month.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">1</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt;  [1] "2019-01-20" "2019-01-21" "2019-01-22" "2019-01-23" "2019-01-24"</span></span>
<span><span class="co">#&gt;  [6] "2019-01-25" "2019-01-26" "2019-01-27" "2019-01-28" "2019-01-29"</span></span>
<span><span class="co">#&gt; [11] "2019-01-30" "2019-01-31" "2019-02-01" "2019-02-02" "2019-02-03"</span></span>
<span><span class="co">#&gt; [16] "2019-02-04" "2019-02-05"</span></span>
<span></span>
<span><span class="co"># Grouping by 5 days of the current month</span></span>
<span><span class="fu"><a href="../reference/date_group.html">date_group</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"day"</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "2019-01-16" "2019-01-21" "2019-01-21" "2019-01-21" "2019-01-21"</span></span>
<span><span class="co">#&gt;  [6] "2019-01-21" "2019-01-26" "2019-01-26" "2019-01-26" "2019-01-26"</span></span>
<span><span class="co">#&gt; [11] "2019-01-26" "2019-01-31" "2019-02-01" "2019-02-01" "2019-02-01"</span></span>
<span><span class="co">#&gt; [16] "2019-02-01" "2019-02-01"</span></span></code></pre></div>
<p>The thing to note about grouping by day of the month is that at the
end of each month, the groups restart. So this created groups for
January of
<code>[1, 5], [6, 10], [11, 15], [16, 20], [21, 25], [26, 30], [31]</code>.</p>
<p>You can also group by month or year:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/date_group.html">date_group</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"month"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "2019-01-01" "2019-01-01" "2019-01-01" "2019-01-01" "2019-01-01"</span></span>
<span><span class="co">#&gt;  [6] "2019-01-01" "2019-01-01" "2019-01-01" "2019-01-01" "2019-01-01"</span></span>
<span><span class="co">#&gt; [11] "2019-01-01" "2019-01-01" "2019-02-01" "2019-02-01" "2019-02-01"</span></span>
<span><span class="co">#&gt; [16] "2019-02-01" "2019-02-01"</span></span></code></pre></div>
<p>This also works with date-times, adding the ability to group by hour
of the day, minute of the hour, and second of the minute.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">55</span>, zone <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">15</span>, zone <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span>,</span>
<span>  by <span class="op">=</span> <span class="fl">120</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt;  [1] "2019-01-01 01:55:00 UTC" "2019-01-01 01:57:00 UTC"</span></span>
<span><span class="co">#&gt;  [3] "2019-01-01 01:59:00 UTC" "2019-01-01 02:01:00 UTC"</span></span>
<span><span class="co">#&gt;  [5] "2019-01-01 02:03:00 UTC" "2019-01-01 02:05:00 UTC"</span></span>
<span><span class="co">#&gt;  [7] "2019-01-01 02:07:00 UTC" "2019-01-01 02:09:00 UTC"</span></span>
<span><span class="co">#&gt;  [9] "2019-01-01 02:11:00 UTC" "2019-01-01 02:13:00 UTC"</span></span>
<span><span class="co">#&gt; [11] "2019-01-01 02:15:00 UTC"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date_group.html">date_group</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"minute"</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "2019-01-01 01:55:00 UTC" "2019-01-01 01:55:00 UTC"</span></span>
<span><span class="co">#&gt;  [3] "2019-01-01 01:55:00 UTC" "2019-01-01 02:00:00 UTC"</span></span>
<span><span class="co">#&gt;  [5] "2019-01-01 02:00:00 UTC" "2019-01-01 02:05:00 UTC"</span></span>
<span><span class="co">#&gt;  [7] "2019-01-01 02:05:00 UTC" "2019-01-01 02:05:00 UTC"</span></span>
<span><span class="co">#&gt;  [9] "2019-01-01 02:10:00 UTC" "2019-01-01 02:10:00 UTC"</span></span>
<span><span class="co">#&gt; [11] "2019-01-01 02:15:00 UTC"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="rounding">Rounding<a class="anchor" aria-label="anchor" href="#rounding"></a>
</h3>
<p>While grouping is useful for summarizing <em>within</em> a component,
rounding is useful for summarizing <em>across</em> components. It is
great for summarizing by, say, a rolling set of 60 days.</p>
<p>Rounding operates on the underlying count that makes up your date or
date-time. To see what I mean by this, try unclassing a date:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 18262</span></span></code></pre></div>
<p>This is a count of days since the <em>origin</em> that R uses,
1970-01-01, which is considered day 0. If you were to floor by 60 days,
this would bundle
<code>[1970-01-01, 1970-03-02), [1970-03-02, 1970-05-01)</code>, and so
on. Equivalently, it bundles counts of <code>[0, 60), [60, 120)</code>,
etc.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">01</span>, <span class="fl">01</span><span class="op">)</span>, <span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">05</span>, <span class="fl">10</span><span class="op">)</span>, by <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-and-date-time-rounding.html">date_floor</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"day"</span>, n <span class="op">=</span> <span class="fl">60</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1970-01-01" "1970-01-01" "1970-01-01" "1970-03-02" "1970-03-02"</span></span>
<span><span class="co">#&gt; [6] "1970-03-02" "1970-05-01"</span></span>
<span><span class="fu"><a href="../reference/date-and-date-time-rounding.html">date_ceiling</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"day"</span>, n <span class="op">=</span> <span class="fl">60</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1970-01-01" "1970-03-02" "1970-03-02" "1970-03-02" "1970-05-01"</span></span>
<span><span class="co">#&gt; [6] "1970-05-01" "1970-05-01"</span></span></code></pre></div>
<p>If you prefer a different origin, you can supply a Date
<code>origin</code> to <code><a href="../reference/date-and-date-time-rounding.html">date_floor()</a></code>, which determines what
“day 0” is considered to be. This can be useful for grouping by multiple
weeks if you want to control what is considered the start of the week.
Since 1970-01-01 is a Thursday, flooring by 2 weeks would normally
generate all Thursdays:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/as_weekday.html">as_weekday</a></span><span class="op">(</span><span class="fu"><a href="../reference/date-and-date-time-rounding.html">date_floor</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"week"</span>, n <span class="op">=</span> <span class="fl">14</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;weekday[7]&gt;</span></span>
<span><span class="co">#&gt; [1] Thu Thu Thu Thu Thu Thu Thu</span></span></code></pre></div>
<p>To change this you can supply an <code>origin</code> on the weekday
that you’d like to be considered the first day of the week.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sunday</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">01</span>, <span class="fl">04</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-and-date-time-rounding.html">date_floor</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"week"</span>, n <span class="op">=</span> <span class="fl">14</span>, origin <span class="op">=</span> <span class="va">sunday</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1969-09-28" "1970-01-04" "1970-01-04" "1970-01-04" "1970-01-04"</span></span>
<span><span class="co">#&gt; [6] "1970-01-04" "1970-04-12"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/as_weekday.html">as_weekday</a></span><span class="op">(</span><span class="fu"><a href="../reference/date-and-date-time-rounding.html">date_floor</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"week"</span>, n <span class="op">=</span> <span class="fl">14</span>, origin <span class="op">=</span> <span class="va">sunday</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;weekday[7]&gt;</span></span>
<span><span class="co">#&gt; [1] Sun Sun Sun Sun Sun Sun Sun</span></span></code></pre></div>
<p>If you only need to floor by 1 week, it is often easier to use
<code><a href="../reference/date-and-date-time-shifting.html">date_shift()</a></code>, as seen in the next section.</p>
</div>
<div class="section level3">
<h3 id="shifting">Shifting<a class="anchor" aria-label="anchor" href="#shifting"></a>
</h3>
<p><code><a href="../reference/date-and-date-time-shifting.html">date_shift()</a></code> allows you to target a weekday, and then
shift a vector of dates forward or backward to the next instance of that
target. It requires using one of the new types in clock,
<em>weekday</em>, which is supplied as the target.</p>
<p>For example, to shift to the next Tuesday:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Wednesday / Thursday</span></span>
<span><span class="fu"><a href="../reference/as_weekday.html">as_weekday</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;weekday[2]&gt;</span></span>
<span><span class="co">#&gt; [1] Wed Thu</span></span>
<span></span>
<span><span class="co"># `clock_weekdays` is a helper that returns the code corresponding to</span></span>
<span><span class="co"># the requested day of the week</span></span>
<span><span class="va">clock_weekdays</span><span class="op">$</span><span class="va">tuesday</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span></span>
<span><span class="va">tuesday</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/weekday.html">weekday</a></span><span class="op">(</span><span class="va">clock_weekdays</span><span class="op">$</span><span class="va">tuesday</span><span class="op">)</span></span>
<span><span class="va">tuesday</span></span>
<span><span class="co">#&gt; &lt;weekday[1]&gt;</span></span>
<span><span class="co">#&gt; [1] Tue</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-and-date-time-shifting.html">date_shift</a></span><span class="op">(</span><span class="va">x</span>, target <span class="op">=</span> <span class="va">tuesday</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-07" "2020-01-07"</span></span></code></pre></div>
<p>Shifting to the <em>previous</em> day of the week is a nice way to
floor by 1 week. It allows you to control the start of the week in a way
that is slightly easier than using
<code>date_floor(origin = )</code>.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">01</span>, <span class="fl">01</span><span class="op">)</span>, <span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">01</span>, <span class="st">"last"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/date-and-date-time-shifting.html">date_shift</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">tuesday</span>, which <span class="op">=</span> <span class="st">"previous"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "1969-12-30" "1969-12-30" "1970-01-06" "1970-01-06" "1970-01-13"</span></span>
<span><span class="co">#&gt;  [6] "1970-01-13" "1970-01-13" "1970-01-20" "1970-01-20" "1970-01-27"</span></span>
<span><span class="co">#&gt; [11] "1970-01-27"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="arithmetic">Arithmetic<a class="anchor" aria-label="anchor" href="#arithmetic"></a>
</h2>
<p>You can do arithmetic with dates and date-times using the family of
<code>add_*()</code> functions. With dates, you can add years, months,
and days. With date-times, you can additionally add hours, minutes, and
seconds.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/clock-arithmetic.html">add_years</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2021-01-01" "2022-01-01" "2023-01-01" "2024-01-01" "2025-01-01"</span></span></code></pre></div>
<p>One of the neat parts about clock is that it requires you to be
explicit about how you want to handle invalid dates when doing
arithmetic. What is 1 month after January 31st? If you try and create
this date, you’ll get an error.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">1</span>, <span class="fl">31</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/clock-arithmetic.html">add_months</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `invalid_resolve()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Invalid date found at location 1.</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">ℹ</span> Resolve invalid date issues by specifying the `invalid` argument.</span></span></code></pre></div>
<p>clock gives you the power to handle this through the
<code>invalid</code> option:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The previous valid moment in time</span></span>
<span><span class="fu"><a href="../reference/clock-arithmetic.html">add_months</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span>, invalid <span class="op">=</span> <span class="st">"previous"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-02-29"</span></span>
<span></span>
<span><span class="co"># The next valid moment in time</span></span>
<span><span class="fu"><a href="../reference/clock-arithmetic.html">add_months</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span>, invalid <span class="op">=</span> <span class="st">"next"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-03-01"</span></span>
<span></span>
<span><span class="co"># Overflow the days. There were 29 days in February, 2020, but we</span></span>
<span><span class="co"># specified 31. So this overflows 2 days past day 29.</span></span>
<span><span class="fu"><a href="../reference/clock-arithmetic.html">add_months</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span>, invalid <span class="op">=</span> <span class="st">"overflow"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-03-02"</span></span>
<span></span>
<span><span class="co"># If you don't consider it to be a valid date</span></span>
<span><span class="fu"><a href="../reference/clock-arithmetic.html">add_months</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span>, invalid <span class="op">=</span> <span class="st">"NA"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>As a teaser, the low level library has a <em>calendar</em> type named
year-month-day that powers this operation. It actually gives you
<em>more</em> flexibility, allowing <code>"2020-02-31"</code> to exist
in the wild:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ymd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_year_month_day.html">as_year_month_day</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="../reference/duration-helper.html">duration_months</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">ymd</span></span>
<span><span class="co">#&gt; &lt;year_month_day&lt;day&gt;[1]&gt;</span></span>
<span><span class="co">#&gt; [1] "2020-02-31"</span></span></code></pre></div>
<p>You can use <code>invalid_resolve(invalid =)</code> to resolve this
like you did in <code><a href="../reference/clock-arithmetic.html">add_months()</a></code>, or you can let it hang around
if you expect other operations to make it “valid” again.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Adding 1 more month makes it valid again</span></span>
<span><span class="va">ymd</span> <span class="op">+</span> <span class="fu"><a href="../reference/duration-helper.html">duration_months</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;year_month_day&lt;day&gt;[1]&gt;</span></span>
<span><span class="co">#&gt; [1] "2020-03-31"</span></span></code></pre></div>
<p>When working with date-times, you can additionally add hours,
minutes, and seconds.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">30</span>, zone <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-arithmetic.html">add_days</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-arithmetic.html">add_hours</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-02 04:30:00 EST" "2020-01-02 05:30:00 EST"</span></span>
<span><span class="co">#&gt; [3] "2020-01-02 06:30:00 EST" "2020-01-02 07:30:00 EST"</span></span></code></pre></div>
<p>When adding units of time to a POSIXct, you have to be very careful
with daylight saving time issues. clock tries to help you out by letting
you know when you run into an issue:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">04</span>, <span class="fl">25</span>, <span class="fl">02</span>, <span class="fl">30</span>, <span class="fl">00</span>, zone <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; [1] "1970-04-25 02:30:00 EST"</span></span>
<span></span>
<span><span class="co"># Daylight saving time gap on the 26th between 01:59:59 -&gt; 03:00:00</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/clock-arithmetic.html">add_days</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `as_zoned_time()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Nonexistent time due to daylight saving time at location 1.</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">ℹ</span> Resolve nonexistent time issues by specifying the `nonexistent` argument.</span></span></code></pre></div>
<p>You can solve this using the <code>nonexistent</code> argument to
control how these times should be handled.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Roll forward to the next valid moment in time</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/clock-arithmetic.html">add_days</a></span><span class="op">(</span><span class="fl">1</span>, nonexistent <span class="op">=</span> <span class="st">"roll-forward"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1970-04-26 03:00:00 EDT"</span></span>
<span></span>
<span><span class="co"># Roll backward to the previous valid moment in time</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/clock-arithmetic.html">add_days</a></span><span class="op">(</span><span class="fl">1</span>, nonexistent <span class="op">=</span> <span class="st">"roll-backward"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1970-04-26 01:59:59 EST"</span></span>
<span></span>
<span><span class="co"># Shift forward by adding the size of the DST gap</span></span>
<span><span class="co"># (this often keeps the time of day,</span></span>
<span><span class="co"># but doesn't guaratee that relative ordering in `x` is maintained</span></span>
<span><span class="co"># so I don't recommend it)</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/clock-arithmetic.html">add_days</a></span><span class="op">(</span><span class="fl">1</span>, nonexistent <span class="op">=</span> <span class="st">"shift-forward"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1970-04-26 03:30:00 EDT"</span></span>
<span></span>
<span><span class="co"># Replace nonexistent times with an NA</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/clock-arithmetic.html">add_days</a></span><span class="op">(</span><span class="fl">1</span>, nonexistent <span class="op">=</span> <span class="st">"NA"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-and-setting">Getting and setting<a class="anchor" aria-label="anchor" href="#getting-and-setting"></a>
</h2>
<p>clock provides a family of getters and setters for working with dates
and date-times. You can get and set the year, month, or day of a
date.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/date_build.html">date_build</a></span><span class="op">(</span><span class="fl">2019</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/clock-getters.html">get_year</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2019</span></span>
<span><span class="fu"><a href="../reference/clock-getters.html">get_month</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5</span></span>
<span><span class="fu"><a href="../reference/clock-getters.html">get_day</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span>
<span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-setters.html">set_day</a></span><span class="op">(</span><span class="fl">22</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-setters.html">set_month</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-10-22"</span></span></code></pre></div>
<p>As you might expect by now, setting the date to an invalid date
requires you to explicitly handle this:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-setters.html">set_day</a></span><span class="op">(</span><span class="fl">31</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-setters.html">set_month</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `invalid_resolve()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Invalid date found at location 1.</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">ℹ</span> Resolve invalid date issues by specifying the `invalid` argument.</span></span>
<span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-setters.html">set_day</a></span><span class="op">(</span><span class="fl">31</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-setters.html">set_month</a></span><span class="op">(</span><span class="fl">4</span>, invalid <span class="op">=</span> <span class="st">"previous"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2019-04-30"</span></span></code></pre></div>
<p>You can additionally set the hour, minute, and second of a
POSIXct.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/date_time_build.html">date_time_build</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, zone <span class="op">=</span> <span class="st">"America/New_York"</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; [1] "2020-01-02 03:00:00 EST"</span></span>
<span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-setters.html">set_minute</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/clock-setters.html">set_second</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2020-01-02 03:05:10 EST"</span></span></code></pre></div>
<p>As with other manipulations of POSIXct, you’ll have to be aware of
daylight saving time when setting components. You may need to supply the
<code>nonexistent</code> or <code>ambiguous</code> arguments of the
<code>set_*()</code> functions to handle these issues.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer>
</body>
</html>
